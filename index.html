<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="google-site-verification" content="TM2JLp2z2ivvAbxCRiY7ekyg7shRkm4LJ23ywpbje1U" />
    <title>The Elder Scrolls V: Skyrim Checklist</title>
    <style>
      /* ================== Variables ================== */
      :root {
        --bg-dark: #121212;
        --bg-panel: #212121;
        --bg-button: #2a2a2a;
        --bg-button-hover: #383838;
        --text-light: #ddd;
        --text-muted: #a0a0a0;
        --accent: #f7bf00;
        --link: #88c0d0;
      }

      /* ================== Global Styles ================== */
      * { box-sizing: border-box; }
      body {
        font-family: sans-serif;
        font-size: clamp(14px, 2vw, 16px);
        margin: 20px;
        background: var(--bg-dark);
        color: var(--text-light);
      }
      h1 { text-align: center; margin: 0 auto 20px; max-width: 1280px; border-radius: 8px; }
      ul { list-style: none; padding: 0; }
      li { margin: 5px 0 20px; }
      input[type="checkbox"]:checked + label { text-decoration: line-through; color: #555; }

      /* ================== Tags ================== */
      .tag { font-size: clamp(0.8em, 1.5vw, 0.95em); padding: 4px 8px; border-radius: 8px; display: inline-block; margin-left: 10px; color: var(--bg-dark); }
      .tagRequired { background: #ff8a80; }
      .tagOptional { background-color: #444; color: #ccc; }
      .tagGiver { background: #80d8ff; }
      .tagNote { color: #aaa; background: #1a1a1a; display: block; margin-left: 20px; margin-top: 4px; width: fit-content; max-width: 100%; word-wrap: break-word;}

      .tagMainQuests { background: #FFD700; }       /* Gold */
      .tagSideQuests { background: #87CEFA; }       /* Sky Blue */
      .tagDivineQuests { background: #00CED1; }     /* Dark Turquoise */
      .tagDeadricQuests { background: #8B0000; }    /* Dark Red */
      
      /* Regions */
      .tagAll { background: #808080; }           /* Gray - generic/any region */
      .tagEastmarch { background: #FF4500; }     /* OrangeRed - volcanic/mountain feel */
      .tagFalkreath { background: #228B22; }     /* ForestGreen */
      .tagHaafingar { background: #4682B4; }     /* SteelBlue - coastal region */
      .tagHjaalmarch { background: #2E8B57; }    /* SeaGreen - marshy/wetlands */
      .tagThePale { background: #ADD8E6; }       /* LightBlue - cold, snowy */
      .tagTheReach { background: #8B4513; }      /* SaddleBrown - rugged/rocky */
      .tagTheRift { background: #DAA520; }       /* Goldenrod - fertile valleys */
      .tagWhiterun { background: #F0E68C; }      /* Khaki - central plains */
      .tagWinterhold { background: #B0C4DE; }    /* LightSteelBlue - icy/northern */
      .tagBlackreach { background: #4B0082; }    /* Indigo - underground/dark */
      .tagAny { background: #696969; }           /* DimGray - wildcard/any */
      .tagDungeon { background: #696969; }       /* DimGray - wildcard/any */
      .tagTasks { background: #696969; }         /* DimGray - wildcard/any */
      .tagBounty { background: #696969; }        /* DimGray - wildcard/any */

      /* Factions */
      .tagCollegeofWinterhold { background: #9370DB; } /* Medium Purple */
      .tagBardsCollege { background: #FF69B4; }        /* Hot Pink */
      .tagBlades { background: #A9A9A9; }              /* Dark Gray */
      .tagCompanions { background: #C0C0C0; }          /* Silver */
      .tagDarkBrotherhood { background: #4B0082; }     /* Indigo */
      .tagImperialLegion { background: #B22222; }      /* Firebrick */
      .tagThievesGuild { background: #556B2F; }        /* Dark Olive Green */
      .tagStormcloaks { background: #1E90FF; }         /* Dodger Blue */
      
      /* Dawnguard DLC */
      .tagMainDawnguardQuest { background: #1E90FF; } /* Dodger Blue */
      .tagSideDawnguardQuest { background: #87CEEB; } /* Sky Blue */
      .tagDawnguardFaction { background: #4682B4; }   /* Steel Blue */
      .tagVolkiharClan { background: #4B0082; }       /* Indigo */
      
      /* Dragonborn DLC */
      .tagMainDragonbornQuest { background: #FF8C00; } /* Dark Orange */
      .tagSideDragonbornQuest { background: #FFA500; } /* Orange */
      
      /* Collectibles */

      /* ================== Layout ================== */
      .content-container {
        display: flex;
        align-items: flex-start;
        gap: 20px;
        max-width: 1280px;
        width: 100%;
        margin: 60px auto 0;
        padding: 0 10px;
      }

      .sidebar-wrapper { width: 100%; max-width: 324px; flex-shrink: 0; }
      .sidebar {
        background: var(--bg-panel);
        border-radius: 8px;
        padding: 20px;
        width: 100%;
        color: #ccc;
        display: flex;
        flex-direction: column;
        align-items: center;
      }
      .profile-bg {
        width: 100%; aspect-ratio: 3/4;
        background-image: url("https://images.igdb.com/igdb/image/upload/t_cover_big/co1vco.webp");
        background-size: cover;
        background-position: center;
        border-radius: 8px;
      }

      .content-section { flex-grow: 1; width: 100%; }
      .content { display: none; border: none; padding: 20px; background: var(--bg-panel); border-radius: 8px; max-width: 1280px; margin: auto; }
      .content.active { display: block; }
      .content ul { color: var(--text-muted); }

      .scrollable-list { max-height: 400px; overflow-y: auto; padding-right: 8px; scrollbar-color: var(--bg-button-hover) #1a1a1a; }

      /* ================== Tabs & Buttons ================== */
      .tab-box { background: var(--bg-panel); border-radius: 8px; padding: 10px; margin: 10px 0; }
      .tab-box2 { background: var(--bg-panel); border-radius: 8px; padding: 10px; margin-bottom: 20px; }
      .tab-buttons { display: flex; flex-direction: column; gap: 8px; }
      .tab-buttons2 { display: flex; flex-wrap: wrap; gap: 8px; overflow-x: auto; }
      .tab-button {
        padding: 10px; background: var(--bg-button); color: #ccc; border-radius: 6px; text-align: center;
        cursor: pointer; transition: background 0.2s; flex-shrink: 0;
      }
      .tab-button:hover, .tab-button.active { background: var(--bg-button-hover); color: var(--accent); }

      .progress { margin-bottom: 10px; }

      /* ================== Stats ================== */
      .stats-layout { display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 20px; }
      .stats-text { flex: 1; min-width: 200px; }
      .stats-chart { flex-shrink: 0; display: flex; justify-content: center; align-items: center; }

      /* ================== Responsive ================== */
      @media (max-width: 768px) {
        .content-container { flex-direction: column; }
        .sidebar-wrapper { margin-bottom: 75px; }
        .sidebar-wrapper, .content-section { width: 100%; }
      }
    </style>
  </head>

  <body>
    <!-- ================== Header ================== -->
    <h1>The Elder Scrolls V: Skyrim Checklist</h1>

    <!-- ================== Main Container ================== -->
    <div class="content-container">

      <!-- ================== Sidebar ================== -->
      <div class="sidebar-wrapper">
        <div class="sidebar"><div class="profile-bg"></div></div>
        <div class="tab-sidebar">
          <div class="tab-box">
            <div class="tab-buttons">
              <div class="tab-button" data-target="faq">FAQ</div>
              <div class="tab-button" data-target="stats">Stats</div>
              <div class="tab-button" onclick="exportChecklist()">Export Progress</div>
              <div class="tab-button" onclick="importChecklist()">Import Progress <input type="file" id="import-file" style="display: none;" /></div>
            </div>
          </div>
        </div>
      </div>

      <!-- ================== Content ================== -->
      <div class="content-section">
        <div class="tab-box2">
          <div class="tab-buttons2">
            <div class="tab-button" data-target="main">Main</div>
            <div class="tab-button" data-target="side">Side</div>
            <div class="tab-button" data-target="baseGameFaction">Faction</div>
            <div class="tab-button" data-target="divine">Divines</div>
            <div class="tab-button" data-target="daedric">Daedric</div>
            <div class="tab-button" data-target="dawnguardDLCQuests">Dawnguard DLC</div>
            <div class="tab-button" data-target="dragonbornDLCQuests">Dragonborn DLC</div>
            <div class="tab-button" data-target="shout">Shouts</div>
            <div class="tab-button" data-target="stone">Stones of Berenziah</div>
            <div class="tab-button" data-target="bug">Bugs in a Jar</div>
            <div class="tab-button" data-target="claw">Dragon Claws</div>
            <div class="tab-button" data-target="map">Treasure Maps</div>
            <div class="tab-button" data-target="misc">Misc Collectibles</div>
            <div class="tab-button" data-target="paragon">Paragons</div>
            <div class="tab-button" data-target="dragonPriestMask">Dragon Priest Masks</div>
          </div>
        </div>

        <!-- Main Quests -->
        <div class="content active" id="main">
          <h2>Main Quests</h2>
          <div class="progress" id="main-Progress">Completed 0 / 0</div>
          <div class="scrollable-list"><ul id="main-Quests"></ul></div>
        </div>
        
        <!-- Side Quests -->
        <div class="content" id="side">
          <h2>Side Quests</h2>
          <div class="progress" id="side-Progress">Completed 0 / 0</div>
          <div id="side-filters" class="tab-buttons2" style="margin-bottom: 10px;"></div>
          <div class="scrollable-list"><ul id="side-Quests"></ul></div>
        </div>

        <!-- Base Game Factions -->
        <div class="content" id="baseGameFaction">
          <h2>Factions</h2>
          <div class="progress" id="baseGameFaction-Progress">Completed 0 / 0</div>
          <div id="baseGameFaction-filters" class="tab-buttons2" style="margin-bottom: 10px;"></div>
          <div class="scrollable-list"><ul id="baseGameFaction-Quests"></ul></div>
        </div>
        
        <!-- Divines Quests -->
        <div class="content" id="divine">
          <h2>Divines Quests</h2>
          <div class="progress" id="divine-Progress">Completed 0 / 0</div>
          <div class="scrollable-list"><ul id="divine-Quests"></ul></div>
        </div>

        <!-- Daedric Quests -->
        <div class="content" id="daedric">
          <h2>Daedric Quests</h2>
          <div class="progress" id="daedric-Progress">Completed 0 / 0</div>
          <div class="scrollable-list"><ul id="daedric-Quests"></ul></div>
        </div>

        <!-- Dawnguard DLC -->
        <div class="content" id="dawnguardDLCQuests">
          <h2>Dawnguard DLC</h2>
          <div class="progress" id="dawnguard-Progress">Completed 0 / 0</div>
          <div id="dawnguard-filters" class="tab-buttons2" style="margin-bottom: 10px;"></div>
          <div class="scrollable-list"><ul id="dawnguard-Quests"></ul></div>
        </div>
        
        <!-- Dragonborn DLC -->
        <div class="content" id="dragonbornDLCQuests">
          <h2>Dragonborn DLC</h2>
          <div class="progress" id="dragonborn-Progress">Completed 0 / 0</div>
          <div id="dragonborn-filters" class="tab-buttons2" style="margin-bottom: 10px;"></div>
          <div class="scrollable-list"><ul id="dragonborn-Quests"></ul></div>
        </div>
        
        <!-- Shouts -->
        <div class="content" id="shout">
          <h2>Shouts</h2>
          <div class="progress" id="shout-Progress">Completed 0 / 0</div>
          <div class="scrollable-list"><ul id="shout-Collectibles"></ul></div>
        </div>
        
        <!-- Stones -->
        <div class="content" id="stone">
          <h2>Stones of Berenziah</h2>
          <div class="progress" id="stone-Progress">Completed 0 / 0</div>
          <div class="scrollable-list"><ul id="stone-Collectibles"></ul></div>
        </div>
        
        <!-- Bugs in a Jar -->
        <div class="content" id="bug">
          <h2>Bugs in a Jar</h2>
          <div class="progress" id="bug-Progress">Completed 0 / 0</div>
          <div class="scrollable-list"><ul id="bug-Collectibles"></ul></div>
        </div>
        
        <!-- Claws -->
        <div class="content" id="claw">
          <h2>Amethyst Claws</h2>
          <div class="progress" id="claw-Progress">Completed 0 / 0</div>
          <div class="scrollable-list"><ul id="claw-Collectibles"></ul></div>
        </div>
        
        <!-- Treasure Maps -->
        <div class="content" id="map">
          <h2>Treasure Maps</h2>
          <div class="progress" id="map-Progress">Completed 0 / 0</div>
          <div class="scrollable-list"><ul id="map-Collectibles"></ul></div>
        </div>

        <!-- Misc Collectibles -->
        <div class="content" id="misc">
          <h2>Misc Collectibles</h2>
          <div class="progress" id="misc-Progress">Completed 0 / 0</div>
          <div class="scrollable-list"><ul id="misc-Collectibles"></ul></div>
        </div>
        
        <!-- Paragons -->
        <div class="content" id="paragon">
          <h2>Paragons</h2>
          <div class="progress" id="paragon-Progress">Completed 0 / 0</div>
          <div class="scrollable-list"><ul id="paragon-Collectibles"></ul></div>
        </div>

        <!-- Dragon Priest Masks -->
        <div class="content" id="dragonPriestMask">
          <h2>Dragon Priest Masks</h2>
          <div class="progress" id="dragonPriestMask-Progress">Completed 0 / 0</div>
          <div class="scrollable-list"><ul id="dragonPriestMask-Collectibles"></ul></div>
        </div>

        <!-- FAQ -->
        <div class="content" id="faq">
          <h3>FAQ</h3>
          <p>This project was built by a fan and is inspired by similar checklists for other games like Dark Souls.</p>
          <p><strong>I have feedback, how can I contribute?</strong><br />You can visit the <span id="faq-link-container"></span> and report Issues or create a fork and submit a Pull Request.</p>
          <p><strong>Is this a guide?</strong><br />No, this is not a full walkthrough or guide. It simply helps you stay organized while playing by letting you check off content as you complete it.</p>
          <p><strong>How is progress saved?</strong><br />Your progress is saved locally in your browser using localStorage. This means your checklist will stay saved as long as you don’t clear your browser data.</p>
        </div>

        <!-- Stats -->
        <div class="content" id="stats">
          <h2>Quests Overview</h2>
          <div class="scrollable-list">
            <div class="stats-chart"><canvas id="combinedChart" style="width:360px; max-height:360px;"></canvas></div>
            <div class="stats-layout">
              <div class="stats-text">
                <div id="completed-by-type" style="margin-top:20px;"><h2>Completed</h2></div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- ================== Templates ================== -->
    <template id="github-link-template-faq">
      <a href="https://github.com/Lepehn/the-elder-scrolls-skyrim-checklist" target="_blank" style="color: var(--link); text-decoration: none;">GitHub repository</a>
    </template>
    <template id="github-link-template-footer">
      <a href="https://github.com/Lepehn/the-elder-scrolls-skyrim-checklist" target="_blank" style="color: var(--link); text-decoration: none;">report an issue on GitHub</a>
    </template>

    <!-- ================== Scripts ================== -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
      // ================== Tab Switching ==================
      document.querySelectorAll(".tab-button").forEach(button => {
        button.addEventListener("click", () => {
          const target = button.dataset.target;
          if (!target) return;

          document.querySelectorAll(".tab-button").forEach(btn => btn.classList.remove("active"));
          button.classList.add("active");

          document.querySelectorAll(".content").forEach(c => c.classList.remove("active"));
          document.getElementById(target).classList.add("active");

          if(target === "stats") updateAllStats();
        });
      });

      // ================== Quest Constructor ==================
      function quests(title, note, tag = null, optional = false) {
        const q = { title, note };
        if(tag) q.tag = tag;
        if(optional) q.optional = "Optional";
        return q;
      }
      
      // ================== Collectible Constructor ==================
      function collectibles(title, note, tag = null, optional = false) {
        const c = { title, note };
        if(tag) c.tag = tag;
        if(optional) c.optional = "Optional";
        return c;
      }
      
     	/* To Add New Quest
		- Add quest data
		- add filters
		- add html
		- update questCategories
		- update updateProgressByType
		- update stats allQuests
		*/

      // ================== Filters ==================
      const regions = ["All","Eastmarch", "Falkreath","Haafingar","Hjaalmarch","The Pale","The Reach","The Rift", "Whiterun", "Winterhold", "Blackreach", "Dungeon","Tasks", "Bounty","Any"];
      const baseFactions = ["All","College of Winterhold","Bards College","Blades","Companions","Dark Brotherhood","Thieves Guild", "Imperial Legion", "Stormcloaks"];
      const dawnguardDLC = ["All","Main Dawnguard Quest","Side Dawnguard Quest","Dawnguard Faction","Volkihar Clan"];
      const dragonbornDLC = ["All","Main Dragonborn Quest","Side Dragonborn Quest"];

      // ================== Unified Quest Configuration ==================
      const questCategories = [
        // ================== Main Quests ================== 
        {
          key: "main",
          label: "Main Quests",
          color: "#FF4500",
          quests: [
            quests("Unbound", "Escape Imperial custody and a dragon raid."),
            quests("Before the Storm", "Inform the Jarl of Whiterun about the dragon attack on Helgen."),
            quests("Bleak Falls Barrow", "Retrieve the Dragonstone."),
            quests("Dragon Rising", "Investigate a Dragon sighting near Whiterun."),
            quests("The Way of the Voice", "Meet the Greybeards."),
            quests("The Horn of Jurgen Windcaller", "Retrieve a Greybeard artifact from Ustengrav."),
            quests("A Blade in the Dark", "Prove you are Dragonborn to Delphine by slaying the dragon Sahloknir."),
            quests("Diplomatic Immunity", "Infiltrate a party at the Thalmor Embassy."),
            quests("A Cornered Rat", "Locate Esbern."),
            quests("Alduin's Wall", "Locate the prophecy within Sky Haven Temple."),
            quests("The Throat of the World", "Receive a lesson from Paarthurnax."),
            quests("Elder Knowledge", "Locate an Elder Scroll."),
            quests("Alduin's Bane", "Exploit the Time Wound to learn Dragonrend."),
            quests("The Fallen", "Capture and interrogate one of Alduin's allies."),
            quests("Paarthurnax", "Deal with a potential threat.", null, true),
            quests("Season Unending", "Enforce a ceasefire to secure Dragonsreach.", null, true),
            quests("The World-Eater's Eyrie", "Battle through Skuldafn Temple to reach Alduin's portal to Sovngarde."),
            quests("Soverngarde", "Seek out Alduin within Sovngarde."),
            quests("Dragonslayer", "Put an end to the World Eater.")
          ]},
        // ================== Side Quests ================== 
        {
          key: "side",
          label: "Side Quests",
          color: "#FFA500",
          filters: regions,
          quests: [
            // Dungeon Quests
            quests("Medresi Dran and the Wandering Dead", "Discover the treasure of Angarvunde.", "Dungeon"),
            quests("A Love Beyond Death", "Kill Lu'ah Al-Skaven in Ansilvund.", "Dungeon"),
            quests("Composure, Speed and Precision", "Clear out Angi’s Camp.", "Dungeon"),
            quests("Leap Before You Look", "Clear out Bard’s Leap Summit.", "Dungeon"),
            quests("The Affairs of Hargravens", "Help an imprisoned hagraven reclaim her tower at Blind Cliff Bastion.", "Dungeon"),
            quests("Repentance", "Help Illia prevent her mother from transforming into a hagraven at Darklight Tower.", "Dungeon"),
            quests("Siege on the Dragon Cult", "Defeat Rahgot in Forelhost and recover his mask.", "Dungeon"),
            quests("What Lies Beneath", "Investigate the Frostflow Lighthouse and discover the source of an attack.", "Dungeon"),
            quests("The Pale Lady", "Find out what happened in Frostmere Crypt.", "Dungeon"),
            quests("A Scroll For Anska", "Protect Anska and battle through High Gate Ruins.", "Dungeon"),
            quests("Ancestral Worship", "Accompany Golldir and save Hillgrund's Tomb from a Necromancer.", "Dungeon"),
            quests("Forgetting about Fjola", "Help Christer locate his kidnapped wife at Mistwatch.", "Dungeon"),
            quests("Hunter and Hunted", "Help an injured hunter avenge his fallen companions at Moss Mother Cavern.", "Dungeon"),
            quests("The Lost Expedition", "Recover the journals from Nchuand-Zel.", "Dungeon"),
            quests("The Nilheim Scam", "Escort Telrav back to his camp in Nilheim.", "Dungeon"),
            quests("Otar’s Mad Guardians", "Discover the secrets of Ragnvald.", "Dungeon"),
            quests("The Legend of the Red Eagle", "Find Red Eagle's sword at Rebel's Cairn.", "Dungeon"),
            quests("Lifting the Shroud", "Investigate the haunted barrow outside of Ivarstead.", "Dungeon"),
            quests("The Secret at the Sleeping Tree", "Question Ysolda about a note found on a dead Orc.", "Dungeon"),
            quests("The Savior of Selveni Nethri", "Help a necromancer escape Southfringe Sanctum.", "Dungeon"),
            quests("Infiltration", "Help Stalleo retake Treva's Watch.", "Dungeon"),
            quests("Evil in Waiting", "Seal away an ancient evil in Valthume.", "Dungeon"),
            quests("Silenced Tongues", "Unlock the burial chamber of Kvenel in Volunruud.", "Dungeon"),
            quests("Ashore in a Sea of Ghosts", "Find treasure in Yngol Barrow.", "Dungeon"),
            quests("Forbidden Legend", "Investigate the Gauldur Legend at Folgunthur.", "Dungeon"),
            quests("Coming of Age", "Help a daring adventurer and her companion.", "Dungeon"),
            
            // ===== Eastmarch Quests =====
            quests("Blood on the Ice", "Windhelm is plagued by a shadowy killer.", "Eastmarch"),
            quests("Rise in the East", "Help the East Empire Company take care of pirates.", "Eastmarch"),
            quests("The White Phial", "Retrieve a legendary alchemical artifact.", "Eastmarch"),
            quests("Repairing the Phial", "Acquire materials to repair the White Phial.", "Eastmarch"),
            quests("Friend of the Jarl (Eastmarch)", "Assist the people of Eastmarch to become Thane.", "Eastmarch"),
            
            // ===== Falkreath Quests =====
            quests("Kill the Giant (Skald)", "Assist Skald by killing a giant.", "Falkreath"),
            quests("Pieces of the Past", "Visit the museum in Dawnstar to collect the pieces of Mehrunes’ Razor.", "Falkreath"),
            quests("Waking Nightmare", "Investigate the nightmares plaguing Dawnstar.", "Falkreath"),
            quests("Dungeon Delving (Frida)", "Find an item Frida lost in a dungeon.", "Falkreath"),
            quests("Rare Gifts (Rustleif)", "Bring a rare gift to Rustleif.", "Falkreath"),
            quests("Thane of the Pale", "Assist the Jarl of Dawnstar and become Thane.", "Falkreath"),
            quests("A Daedra's Best Friend", "Join Barbas the dog to reunite him with his master.", "Falkreath"),
            quests("Dark Ancestor", "Assist the priest of Arkay with a dangerous spirit.", "Falkreath"),
            quests("Ill Met by Moonlight", "Participate in the Daedric quest of Hircine.", "Falkreath"),
            quests("Kill the Bandit Leader (Siddgeir)", "Clear out a bandit hideout for Siddgeir.", "Falkreath"),
            quests("Delivery (Thadgeir)", "Deliver a letter for Thadgeir.", "Falkreath"),
            quests("Dungeon Delving (Runil)", "Retrieve an item from a dungeon for Runil.", "Falkreath"),
            quests("Some Light Theft (Dengeir)", "Steal an item for Dengeir.", "Falkreath"),
            quests("Rare Gifts (Siddgeir)", "Bring a rare gift to Siddgeir.", "Falkreath"),
            quests("Thane of Falkreath", "Assist the Jarl of Falkreath and become Thane.", "Falkreath"),
            
            // ===== Haafingar Quests =====
            quests("Lights Out!", "Help run a cargo ship aground.", "Haafingar"),
            quests("The Man Who Cried Wolf", "Investigate reports of strange happenings in Wolfskull Cave.", "Haafingar"),
            quests("The Wolf Queen Awakened", "Stop Potema’s return to power.", "Haafingar"),
            quests("Friend of the Jarl (Haafingar)", "Finish The Wolf Queen Awakened and the Jarl’s task Elisif’s Tribute.", "Haafingar"),
            quests("Friend of the Hold (Haafingar)", "Assist the people of the hold by completing five quests or objectives in Haafingar.", "Haafingar"),
            quests("House in the City (Haafingar)", "Buy Proudspire Manor in Solitude.", "Haafingar"),
            quests("No News is Good News", "Find out about the fate of Angeline Morrard's daughter from Captain Aldis.", "Haafingar"),
            quests("Fit for a Jarl", "Speak to Taarie about clothing fit for a Jarl.", "Haafingar"),
            quests("Return to Grace", "Convince Greta to return to the Temple of the Divines.", "Haafingar"),
            quests("Delivery (Sorex)", "Deliver Sorex’s package to Falk Firebeard.", "Haafingar"),
            quests("The Spiced Wine", "Convince Vittoria Vici to hand over a shipment for Evette.", "Haafingar"),
            quests("Elisif's Tribute", "Place a tribute to Elisif’s late husband.", "Haafingar"),
            quests("Item Retrieval (Noster’s Helmet)", "Return Noster One-Eye’s helmet to him.", "Haafingar"),
            quests("Rare Item Hunt (Blocking Training)", "Help Captain Aldis train his men in blocking.", "Haafingar"),
            quests("A Good Talking To (Octieve San)", "Talk to Irnskar about Octieve San’s gambling debts.", "Haafingar"),
            quests("The Bandit Slayer (Ahtar)", "Help Ahtar kill a bandit leader who escaped Solitude’s jail.", "Haafingar"),
            quests("The Vampire Slayer", "Clear out a vampire lair for Sybille Stentor.", "Haafingar"),
            quests("Dragon’s Breath Mead", "Retrieve Dragon’s Breath Mead from Olda’s husband’s stash.", "Haafingar"),
            
            // ===== Hjaalmarch Quests =====
            quests("Laid to Rest", "Investigate a tragic house fire, and uncover a plot against Morthal.", "Hjaalmarch"),
            quests("Rising at Dawn", "Seek out Falion to cure yourself of vampirism.", "Hjaalmarch"),
            quests("Friend of the Jarl (Hjaalmarch)", "Finish Laid to Rest or capture Hjaalmarch Hold as part of the Civil War.", "Hjaalmarch"),
            quests("Friend of the Hold (Hjaalmarch)", "Assist the people of Hjaalmarch by completing three quests or objectives.", "Hjaalmarch"),
            quests("Falion’s Nocturnal Habits", "Follow Falion northwest out of town at night.", "Hjaalmarch"),
            quests("For the Good of Morthal", "Deliver Gorm’s letter to Captain Aldis.", "Hjaalmarch"),
            quests("Rare Item Hunt (Lami’s Book)", "Help Lami find the childhood book she read when studying alchemy.", "Hjaalmarch"),
            quests("Sparring Partners (Benor)", "Prove yourself in a fight against Benor, Morthal’s strongest warrior.", "Hjaalmarch"),
            quests("Slow Shipments to Bryling", "Speak to Pactur on Bryling’s behalf about delayed mine shipments.", "Hjaalmarch"),
            quests("The Ghost of Kjenstag Tomb", "Visit the site of the Kjenstag Tomb at night.", "Hjaalmarch"),
            
            // ===== The Pale Quests =====
            quests("Friend of the Jarl (The Pale)", "Finish Waking Nightmare and the Jarl’s task, or capture The Pale Hold as part of the Civil War.", "The Pale"),
            quests("Friend of the Hold (The Pale)", "Assist the people of The Pale by completing three quests or objectives.", "The Pale"),
            quests("Salty Sea-Dogs", "Collect fine-cut void salts for Captain Wayfinder.", "The Pale"),
            quests("Item Retrieval (Frida’s Ring)", "Return Frida’s Ring to her.", "The Pale"),
            quests("Rare Item Hunt (Rustleif)", "Bring an item to Rustleif so he can read to his soon-to-be-born child.", "The Pale"),
            quests("Jobs for the Jarls (Kill the Giant)", "Kill a giant for Jarl Skald the Elder.", "The Pale"),
            quests("Special Delivery (Aeri’s Note)", "Deliver Aeri’s note to Jarl Skald the Elder.", "The Pale"),
            
            // ===== The Reach Quests =====
            quests("The Forsworn Conspiracy", "Investigate a murder in Markarth and uncover a sinister Forsworn plot.", "The Reach"),
            quests("No One Escapes Cidhna Mine", "Escape from Cidhna Mine!", "The Reach"),
            quests("Friend of the Jarl (The Reach)", "Finish both of the Jarl’s tasks or capture The Reach as part of the Civil War.", "The Reach"),
            quests("Friend of the Hold (The Reach)", "Assist the people of The Reach by completing five quests or objectives.", "The Reach"),
            quests("House in the City (Vlindrel Hall)", "Buy Vlindrel Hall in Markarth.", "The Reach"),
            quests("Neutralizing Nimhe", "Help Calcelmo by killing Nimhe, the giant Frostbite Spider in Nchuand-Zel.", "The Reach"),
            quests("The Steward’s Potion", "Deliver the Stallion's Potion from Bothela to Steward Raerek.", "The Reach"),
            quests("The Last Scabbard of Akrash", "Help Ghorza find a legendary Smithing book.", "The Reach"),
            quests("Triumph Over Talos", "Assist Ondolemar by investigating Ogmund’s Talos worship.", "The Reach"),
            quests("The Heart of the Matter", "Bring a Daedra Heart to Moth Gro-Bagol.", "The Reach"),
            quests("Dibella’s Shine", "Retrieve a statue of Dibella taken by the Forsworn for Lisbet.", "The Reach"),
            quests("Delivery to Calcelmo", "Deliver an item to Calcelmo for Kerah.", "The Reach"),
            quests("Special Delivery (Idgrod’s Note)", "Bring Idgrod’s Note to Danica Pure-Spring.", "The Reach"),
            quests("A Good Talking To (Mulush)", "Speak to Mulush about Omluag for his employer.", "The Reach"),
            quests("Sparring Partners (Cosnach)", "Prove yourself by brawling with Cosnach.", "The Reach"),
            quests("Jobs for the Jarls (Forsworn Leader)", "Kill a Forsworn leader for Jarl Igmund.", "The Reach"),
            quests("Jobs for the Jarls (Hagraven)", "Kill a Hagraven for Jarl Igmund and retrieve his father’s shield.", "The Reach"),
            quests("Buy Dwarven Artifact", "Bring a Dwarven artifact to Calcelmo in Markarth.", "The Reach"),
            quests("Special Delivery (Banning’s Spiced Beef)", "Deliver Banning’s spiced beef to Voada.", "The Reach"),
            quests("The Sword of Gharol", "Deliver Gharol’s sword to her daughter Lash gra-Dushnikh.", "The Reach"),
            quests("Sparring Partners (Burguk)", "Test your strength against Burguk in a brawl.", "The Reach"),
            quests("Sanuarach’s Mine!", "Help resolve the dispute over Sanuarach Mine.", "The Reach"),
            quests("Kolskeggr Clear Out", "Clear the Forsworn from Kolskeggr Mine.", "The Reach"),
            quests("The Ghost of Old Hroldan", "Stay in Tiber Septim’s room at the Old Hroldan Inn to uncover its haunting.", "The Reach"),
            quests("Letter to Leontius", "Deliver a letter from Rogatus Salvius to his son Leontius.", "The Reach"),
            quests("Making it Hole Again", "Help Perth clear out the Nordic crypt his mine tunneled into.", "The Reach"),
            quests("Sparring Partners (Larak)", "Brawl with Larak to prove your strength.", "The Reach"),
            
            // ===== The Rift Quests =====
            quests("Friend of the Jarl (The Rift)", "Finish both of the Jarl’s tasks or capture The Rift as part of the Civil War.", "The Rift"),
            quests("Friend of the Hold (The Rift)", "Assist the people of The Rift by completing five quests or objectives.", "The Rift"),
            quests("House in the City (Honeyside)", "Buy Honeyside in Riften.", "The Rift"),
            quests("Jobs for the Jarls (Crime Boss)", "Kill a crime boss for Jarl Laila Law-Giver.", "The Rift"),
            quests("Potion Delivery", "Deliver Wylandriah’s Satchel to her.", "The Rift"),
            quests("Amulet of the Moon", "Bring an Amulet of Mara to Maramal.", "The Rift"),
            quests("Bringing Home the Bound", "Deliver a mammoth tusk to Ysolda.", "The Rift"),
            quests("Special Delivery (Black-Briar Mead)", "Deliver some Black-Briar Mead for Maven.", "The Rift"),
            quests("Special Delivery (Black-Briar Reserve)", "Deliver a bottle of Black-Briar Reserve.", "The Rift"),
            quests("Potion Research", "Bring Wylandriah’s ingredients for her research.", "The Rift"),
            quests("Deliver Madesi’s Items", "Bring Madesi the items he needs for his jewelry.", "The Rift"),
            quests("Dinya’s Tasks", "Help Dinya Balu spread Mara’s love by completing her tasks.", "The Rift"),
            quests("Supply and Demand", "Help Wujeeta with her skooma addiction.", "The Rift"),
            quests("Special Delivery (Riften Weapons)", "Deliver some weapons to Harrald Law-Giver.", "The Rift"),
            quests("Special Delivery (Goldenglow Delivery)", "Deliver a special package for Maven Black-Briar.", "The Rift"),
            quests("Fishing Contest", "Prove your thieving skills by completing a special fishing task.", "The Rift"),
            quests("Love Triangle", "Deliver a letter for Haelga’s lover and stir up trouble.", "The Rift"),
            quests("Supply Run (Elgrim)", "Collect Nirnroot for Elgrim’s Elixirs.", "The Rift"),
            quests("Supply Run (Ingun)", "Collect Deathbell, Nirnroot, and Nightshade for Ingun Black-Briar.", "The Rift"),
            quests("Supply Run (Hafjorg)", "Deliver Frost Salts to Hafjorg.", "The Rift"),
            quests("Supply Run (Dravynea)", "Deliver Frost Salts to Dravynea the Stoneweaver.", "The Rift"),
            quests("Supply Run (Enthir)", "Deliver a staff to Enthir in Winterhold.", "The Rift"),
            quests("Supply Run (Florentus)", "Deliver a weapon to Florentus Baenius.", "The Rift"),
            quests("Supply Run (Sybille)", "Deliver Frost Salts to Sybille Stentor.", "The Rift"),
            quests("Supply Run (Farengar)", "Deliver Frost Salts to Farengar Secret-Fire.", "The Rift"),
            
            // ===== Whiterun Quests =====
            quests("In My Time of Need", "Find the Redguard, Saadia, who is on the run from Hammerfell.", "Whiterun"),
            quests("Missing In Action", "Rescue a missing Stormcloaks supporter from the Thalmor.", "Whiterun"),
            quests("Friend of the Jarl (Whiterun)", "Finish Dragon Rising or capture Whiterun as part of the Civil War.", "Whiterun"),
            quests("House in the City (Breezehome)", "Buy Breezehome (not required to become Thane of Whiterun).", "Whiterun"),
            quests("Bully Braith", "Help Lars deal with being bullied by Braith.", "Whiterun"),
            quests("Argonian Ale Extraction", "Brenuin the beggar longs for the taste of Argonian Ale.", "Whiterun"),
            quests("Greatsword for a Great Man", "Adrianne has finished a sword for the Jarl.", "Whiterun"),
            quests("Andur’s Arkay Amulet", "Andur has mislaid his amulet.", "Whiterun"),
            quests("Salt for Arcadia", "Deliver the Frost Salts for Farengar.", "Whiterun"),
            quests("Item Retrieval (Amren's Sword)", "Find Amren's Family Sword in a bandit camp.", "Whiterun"),
            quests("Rare Item Hunt (Ysolda)", "Bring one Mammoth Tusk to Ysolda.", "Whiterun"),
            quests("A Good Talking To (Carlotta)", "Talk to Mikael about Carlotta.", "Whiterun"),
            quests("Sparring Partners (Uthgerd)", "Uthgerd the Unbroken wants to prove her strength.", "Whiterun"),
            quests("The Golden Claw", "Retrieve a family heirloom from a bandit for a shopkeeper.", "Whiterun"),
            quests("The Love Triangle", "Use a forged letter to resolve a love triangle.", "Whiterun"),
            quests("Erik the Slayer", "Help Erik the Slayer become an adventurer.", "Whiterun"),
            quests("The Words of Power", "Follow the Greybeards' advice to learn a Word of Power from a Word Wall.", "Whiterun"),
            
            // ===== Winterhold Quests =====
            quests("Friend of the Jarl (Winterhold)", "Finish the Jarl’s task or capture Winterhold Hold as part of the Civil War.", "Winterhold"),
            quests("Friend of the Hold (Winterhold)", "Assist the people of the hold by completing three quests or objectives in Winterhold.", "Winterhold"),
            quests("Drowned Sorrows", "Find Isabelle, Ranmir's lost love.", "Winterhold"),
            quests("Jobs for the Jarl (Winterhold)", "Retrieve the Helm of Winterhold for Jarl Korir.", "Winterhold"),
            quests("A Good Talking To (Haran)", "Talk to Ranmir for Haran about his tavern tab.", "Winterhold"),
            quests("A Little Light Thievery (Winterhold)", "Steal Nelacar’s Staff for Malur Seloth.", "Winterhold"),
            
            // ===== Blackreach Quests =====
            quests("A Return To Your Roots (Blackreach)", "Go where a famous Alchemist could not in order to aid ground-breaking research.", "Blackreach"),
            
            // ===== Any Quests =====
            quests("New Moon (Ahkari Caravan)", "Kharjo hopes that you’ll retrieve the Amulet of the Moon for him.", "Any"),
            quests("The Forgemasters Fingers (Orc Strongholds)", "Find The Forgemaster's Fingers to gain favor with the Orcs.", "Any"),
            
            // ===== Bounty Quests =====
            quests("Kill the bandit leader at...", "Eliminate a bandit leader for a bounty reward.", "Bounty"),
            quests("Kill the dragon at...", "Kill a dragon in its lair.", "Bounty"),
            quests("Kill the Forsworn leader of...", "Kill a Forsworn leader for a bounty reward.", "Bounty"),
            quests("Kill the giant at...", "Kill a problematic giant for a bounty reward.", "Bounty"),
            
            // ===== Tasks =====
            quests("Chopping Wood", "Find a Woodcutter’s Axe, a pile of wood, chop away, and sell the firewood.", "Tasks"),
            quests("Mining Ore", "Find a Pickaxe, locate a vein, strike it, and sell the ore.", "Tasks"),
            quests("Harvesting Crops", "Trek over to a farm and harvest crops for pay.", "Tasks"),
            quests("The Gift Of Charity", "Give a piece of gold to a beggar.", "Tasks"),
            quests("A Drunk’s Drink", "Purchase a drink for a friendly drunk, and expect a dance as your reward.", "Tasks"),
            quests("Hide and Seek", "Play a round of Hiding and Seeking with some children in town.", "Tasks"),
            quests("Tag, you're it!", "Play a round of Tag with the children of a city.", "Tasks"),
          ]},

        // ================== Base Game Factions ================== 
        {
          key: "baseGameFaction",
          label: "Factions",
          color: "#4682B4",
          filters: baseFactions,
          quests: [
            // College of Winterhold
            quests("College Objective Quest", "Visit the College of Winterhold.", "College of Winterhold"),
            quests("First Lessons", "Join the College of Winterhold.", "College of Winterhold"),
            quests("Under Saarthal", "Uncover the mysteries beneath this ancient ruin.", "College of Winterhold"),
            quests("Hitting the Books", "Find the books needed to identify the artifact found in Saarthal.", "College of Winterhold"),
            quests("Good Intentions", "Find and consult the Augur of Dunlain.s", "College of Winterhold"),
            quests("Revealing the Unseen", "Discover the location of Magnus' staff.", "College of Winterhold"),
            quests("Containment", "Deal with the aftermath of the Eye's power surge.", "College of Winterhold"),
            quests("The Staff of Magnus", "Retrieve the Staff of Magnus.", "College of Winterhold"),
            quests("The Eye of Magnus", "Reclaim the College and contain the Eye.", "College of Winterhold"),
            
            quests("Arniel's Endeavor", "Uncover an ancient Dwemer secret.", "College of Winterhold", true),
            quests("Brelyna's Practice", "Help Brelyna Maryon test spells.", "College of Winterhold", true),
            quests("J'zargo's Experiment", "Help J'zargo test out a fiery new spell.", "College of Winterhold", true),
            quests("Onmund's Request", "Help Onmund negotiate the return of a family amulet.", "College of Winterhold", true),
            quests("Out of Balance", "Purify the focus points for magical energy around the College.", "College of Winterhold", true),
            quests("Rejoining the College", "Make amends for breaking the College of Winterhold rules.", "College of Winterhold", true),
            quests("Enchanting Pick-Up", "Sergius wants you to pick up an item from a client for enchanting.", "College of Winterhold"),
            quests("Restocking Soul Gems", "Help Sergius Turrianus to fill his stock with soul gems.", "College of Winterhold", true),
            quests("Aftershock", "Put an end to the rupture caused by the Eye of Magnus.", "College of Winterhold", true),
            quests("Rejoining the College", "Make amends for breaking the College of Winterhold rules.", "College of Winterhold", true),
            quests("Tolfdir the Absent-Minded", "Help Tolfdir find his missing alembic.", "College of Winterhold", true),
            quests("Fetch me that Book!", "Fetch a book for Urag gro-Shub.", "College of Winterhold", true),
            quests("Shalidor's Insights", "Discover the writings of Shalidor and benefit from his wisdom.", "College of Winterhold", true),
            quests("Alteration Ritual Spell", "Acquire Kahvozein's Fang and use it to get heartscales from a dragon for Tolfdir.", "College of Winterhold", true),
            quests("Conjuration Ritual Spell", "Find a Sigil Stone by summoning a daedra and learn more about Conjuration.", "College of Winterhold", true),
            quests("Destruction Ritual Spell", "Learn the most powerful Destruction spells Skyrim has to offer.", "College of Winterhold", true),
            quests("Illusion Ritual Spell", "Find some books about Illusion magic to further your Illusion skills.", "College of Winterhold", true),
            quests("Restoration Ritual Spell", "Find the Augur of Dunlain and learn more about Restoration magic.", "College of Winterhold", true),

            // Bards College
            quests("Tending the Flames", "Unveil the truth about a King; become a member of Bards College.", "Bards College"),
            quests("Investigate the Bards College", "Investigate the Bards College.", "Bards College"),
            quests("Finn's Lute", "Return an invaluable lute to Inge Six Fingers.", "Bards College"),
            quests("Pantea's Flute", "Find a missing flute for Pantea.", "Bards College"),
            quests("Rjorn's Drum", "Retrieve a drum for Giraud Gemane.", "Bards College"),

            // Blades
            quests("Rebuilding the Blades", "Recruit new members for the Blades.", "Blades"),
            quests("Dragon Hunting", "Kill a dragon at its lair.", "Blades"),
            quests("Dragon Research", "Help Esbern complete his research on dragons.", "Blades"),

            // Companions
            quests("Take Up Arms", "Prove you are worthy to join the Companions.", "Companions"),
            quests("Proving Honor", "Claim a Fragment of Wuuthrad from Dustman's Cairn.", "Companions"),
            quests("The Silver Hand", "Join the Circle and clear Gallows Rock of werewolf hunters.", "Companions"),
            quests("Blood's Honor", "Claim the head of a Glenmoril Witch for Kodlak Whitemane.", "Companions"),
            quests("Purity of Revenge", "Retrieve the Fragments of Wuuthrad.", "Companions"),
            quests("Glory of the Dead", "Cure Kodlak's spirit and prove yourself as a true Companion.", "Companions"),
            
            quests("Animal Extermination (Beast Contract)", "Fulfill a contract given to the Companions to kill an invading beast.", "Companions", true),
            quests("Animal Extermination (Beast Den)", "Fulfill a contract given to the Companions to clear out a beast den.", "Companions", true),
            quests("Hired Muscle", "Fulfill a contract for the Companions to bring a citizen back in line.", "Companions", true),
            quests("Trouble in Skyrim", "Fulfill a contract for the Companions to clear out a troublesome area.", "Companions", true),
            quests("Family Heirloom", "Fulfill a contract for the Companions to retrieve a stolen family heirloom.", "Companions", true),
            quests("Escaped Criminal", "Fulfill a contract given to the Companions to hunt down an escaped criminal.", "Companions", true),
            quests("Rescue Mission", "Fulfill a contract given to the Companions to rescue a kidnapped citizen.", "Companions", true),
            quests("Striking the Heart", "Assassinate a leader of the Silver Hand (available after The Silver Hand, repeatable).", "Companions", true),
            quests("Stealing Plans", "Search a Silver Hand hideout for information on the location of their headquarters (available after The Silver Hand, repeatable).", "Companions", true),
            quests("Retrieval", "Journey to a random location to retrieve a fragment of Wuuthrad (available after The Silver Hand, repeatable).", "Companions", true),
            quests("Totems of Hircine", "Journey to the given location to find a Totem of Hircine (available after The Silver Hand, repeatable).", "Companions", true),
            quests("Purity", "Help a member of the Circle give up their beasthood (available after The Silver Hand, repeatable).", "Companions", true),
            quests("Dragon Seekers", "Go to a dragon lair with Farkas or Vilkas and kill the dragon (available after The Silver Hand, repeatable).", "Companions", true),

            // Dark Brotherhood
            quests("Delayed Burial", "Convince farmer to help a stranded jester outside of Whiterun.", "Dark Brotherhood", true),
            quests("Innocence Lost", "Help an orphaned child avoid being returned to a caretaker.", "Dark Brotherhood"),
            quests("With Friends Like These...", "Show you are willing to kill on command.", "Dark Brotherhood"),
            quests("Sanctuary", "Pick up your first contracts as a Brotherhood member.", "Dark Brotherhood"),
            quests("Mourning Never Comes", "Help Muiri get her revenge.", "Dark Brotherhood"),
            quests("Whispers in the Dark", "Spy on the Night Mother's keeper.", "Dark Brotherhood"),
            quests("The Silence Has Been Broken", "Meet Amaund Motierre inside Volunruud.", "Dark Brotherhood"),
            quests("Bound Until Death", "Assassinate Vittoria Vici at her own wedding.", "Dark Brotherhood"),
            quests("Breaching Security", "Kill and frame the son of a high-ranking Imperial guard.", "Dark Brotherhood"),
            quests("The Cure for Madness", "Confront the traitor among the Dark Brotherhood.", "Dark Brotherhood"),
            quests("Recipe for Disaster", "Assume the identity of the famous Gourmet.", "Dark Brotherhood"),
            quests("To Kill an Empire", "Attempt to assassinate the Emperor.", "Dark Brotherhood"),
            quests("Death Incarnate", "Assist Brotherhood members in the fight against assault.", "Dark Brotherhood"),
            quests("Hail Sithis!", "Fulfill the biggest contract in Brotherhood history.", "Dark Brotherhood"),
            
            quests("Contract: Narfi", "Kill a hapless beggar in Ivarstead", "Dark Brotherhood", true),
            quests("Contract: Beitild", "Resolve a feud in Dawnstar.", "Dark Brotherhood", true),
            quests("Contract: Ennodius Papius", "Kill Ennodius Papius", "Dark Brotherhood", true),
            quests("Contract: Hern", "Kill Hern, a reclusive vampire.", "Dark Brotherhood", true),
            quests("Contract: Lurbuk", "Silence a terrible bard, permanently", "Dark Brotherhood", true),
            quests("Contract: Deekus", "Slay an Argonian looting a shipwreck.", "Dark Brotherhood", true),
            quests("Contract: Ma'randru-jo", "Assassinate Ma'randru-jo to complete a Dark Brotherhood contract.", "Dark Brotherhood", true),
            quests("Contract: Anoriath", "Kill Anoriath in Whiterun.", "Dark Brotherhood", true),
            quests("Contract: Agnis", "Kill Agnis in Fort Greymoor.", "Dark Brotherhood", true),
            quests("Contract: Maluril", "Kill Maluril in Mzinchaleft.", "Dark Brotherhood", true),
            quests("Contract: Helvard", "Kill Helvard in Falkreath.", "Dark Brotherhood", true),
            quests("Contract: Safia", "Kill a pirate captain on her own ship.", "Dark Brotherhood", true),
            quests("Destroy the Dark Brotherhood!", "Finish the Dark Brotherhood and rid Skyrim of their kind.", "Dark Brotherhood", true),
            quests("Where You Hang Your Enemy's Head...", "Restore the Dark Brotherhood's sanctuary", "Dark Brotherhood", true),
            quests("Honor Thy Family", "Regain the trust of your fellow Assassins.", "Dark Brotherhood", true),
            quests("The Dark Brotherhood Forever", "Yet another child has prayed to their mother.", "Dark Brotherhood", true),

            // Thieves Guild
            quests("A Chance Arrangement", "Help teach a merchant to mind his own business.", "Thieves Guild"),
            quests("Taking Care of Business", "Help Brynjolf collect some debts for the Thieves Guild.", "Thieves Guild"),
            quests("Loud and Clear", "Send a message to a former Thieves Guild client.", "Thieves Guild"),
            quests("Dampened Spirits", "Put Maven Black-Briar's competition out of business.", "Thieves Guild"),
            quests("Scoundrel's Folly", "Squeeze a reluctant informer for information.", "Thieves Guild"),
            quests("Speaking With Silence", "Track down the Dunmer behind the Guild's misfortunes.", "Thieves Guild"),
            quests("Hard Answers", "Help translate Gallus' journal.", "Thieves Guild"),
            quests("The Pursuit", "Break into Mercer Frey's house and search for clues.", "Thieves Guild"),
            quests("Trinity Restored", "Become one of the Nightingales, Nocturnal's guardians.", "Thieves Guild"),
            quests("Blindsighted", "Stop Mercer Frey.", "Thieves Guild"),
            quests("Darkness Returns", "Return the Skeleton Key to its rightful place.", "Thieves Guild"),
            quests("Under New Management", "Become the Guild master of the Thieves Guild.", "Thieves Guild"),

            quests("The Numbers Job", "Alter the business ledger of a store.", "Thieves Guild", true),
            quests("The Fishing Job", "Steal an item out of a target's pocket.", "Thieves Guild", true),
            quests("The Bedlam Job", "Steal a set amount of gold's worth of items.", "Thieves Guild", true),
            quests("The Burglary Job", "Steal a special item from a wealthy home.", "Thieves Guild", true),
            quests("The Shill Job", "Place an item as evidence inside a wealthy home.", "Thieves Guild", true),
            quests("The Sweep Job", "Steal three specific valuable items from a wealthy house.", "Thieves Guild", true),
            quests("The Heist Job", "Steal a particular item from a store.", "Thieves Guild", true),
            quests("Silver Lining", "Recover a stolen silver mold for a silversmith.", "Thieves Guild", true),
            quests("The Dainty Sload", "Frame a ship's captain to get revenge for a jilted merchant.", "Thieves Guild", true),
            quests("Imitation Amnesty", "Help get a convicted prisoner released from jail.", "Thieves Guild", true),
            quests("Summerset Shadows", "Remove a rival guild from the picture.", "Thieves Guild", true),
            quests("Meet the Family", "Speak with some of the members of the Thieves Guild and pick up your gear.", "Thieves Guild", true),
            quests("The Litany of Larceny", "Find items for Delvin Mallory throughout the questline.", "Thieves Guild", true),
            quests("No Stone Unturned", "Find the 24 gems to restore the Crown of Barenziah.", "Thieves Guild", true),
            quests("Toying With The Dead", "Retrieve a necromancer's journals for an interested buyer.", "Thieves Guild", true),
            quests("Thieves Guild Caravan Fence Quest", "Deliver moon sugar to Ri'saad.", "Thieves Guild", true),
            quests("Vald's Debt", "Find the Quill of Gemination to clear Vald's debt to Maven Black-Briar.", "Thieves Guild", true),
            quests("Paid in Full", "Recover the bonemold formula for Glover Mallory.", "Thieves Guild", true),

            // Imperial Legion
            quests("Joining the Legion", "Prove yourself worthy to join the Imperial Legion.", "Imperial Legion"),
            quests("The Jagged Crown", "Find the Jagged Crown for the Imperials.", "Imperial Legion"),
            quests("Message to Whiterun", "Deliver the message that will decide Whiterun's allegiance.", "Imperial Legion"),
            quests("Battle for Whiterun", "Protect Whiterun from the Stormcloak invasion.", "Imperial Legion"),
            quests("Reunification of Skyrim", "Re-unite Skyrim under the leadership of the Empire.", "Imperial Legion"),

            // Stormcloaks
            quests("Joining the Stormcloaks", "Prove yourself worthy of being a Stormcloak rebel.", "Stormcloaks"),
            quests("The Jagged Crown", "Find this crown for Ulfric Stormcloak.", "Stormcloaks"),
            quests("Message to Whiterun", "Deliver an axe to the Jarl of Whiterun.", "Stormcloaks"),
            quests("Battle for Whiterun", "Take Whiterun in the name of the Stormcloaks.", "Stormcloaks"),
            quests("Liberation of Skyrim", "Overarching quest governing the individual battles of the war.", "Stormcloaks")
          ]},
        // ================== Divine Quests ==================
        {
          key: "divine",
          label: "Divines Quests",
          color: "#2E8B57",
          quests: [
            quests("Kyne's Sacred Trials", "Participate in the trials by hunting the guardian beasts of Skyrim."),
            quests("The Blessings of Nature", "Restore the Gildergreen for Danica Pure-Spring in Whiterun."),
            quests("The Book of Love", "Help the Temple of Mara of Riften spread the cause of love."),
            quests("The Heart of Dibella", "Find a new Sybil for the Temple of Dibella in Markarth.")
          ]},
          
        // ================== Daedric Quests ==================
        {
          key: "daedric",
          label: "Daedric Quests",
          color: "#8A2BE2",
          quests: [
            quests("The Black Star", "Visit the Shrine of Azura."),
            quests("Boethiah's Calling", "Become Boethiah's new champion."),
            quests("A Daedra's Best Friend", "Help Barbas reunite with his master."),
            quests("Discerning the Transmundane", "Ask Urag about the insane book."),
            quests("Ill Met By Moonlight", "Hunt in Hircine's name."),
            quests("The Cursed Tribe", "Help lift the curse placed on the Orcs of Largashbur by Malacath."),
            quests("Pieces of the Past", "Retrieve and reforge the scattered pieces of Mehrunes' Razor."),
            quests("The Break of Dawn", "Find Meridia's Beacon and cleanse her temple of undead."),
            quests("The Whispering Door", "Investigate Nelkir's story of a Whispering Lady."),
            quests("The House of Horrors", "Help Molag Bal take revenge upon a servant of Boethiah."),
            quests("The Taste of Death", "Prepare a Feast for the Lady of Decay."),
            quests("Darkness Returns", "Return the Skeleton Key to its rightful place."),
            quests("The Only Cure", "Slay an apostate worshipper for the Daedra Lord Peryite."),
            quests("A Night To Remember", "Find your lost friend, Sam, as you recover from a bad hangover."),
            quests("The Mind of Madness", "Gain access to and solve the mystery of the Pelagius Wing."),
            quests("Waking Nightmare", "Relieve the people of Dawnstar from Vaermina's curse.")
          ]},
        // ================== Dawnguard DLC ==================
        {
          key: "dawnguard",
          label: "Dawnguard DLC",
          color: "#2E8B57",
          filters: dawnguardDLC,
          quests: [
            quests("Dawnguard", "Join the Dawnguard.", "Main Dawnguard Quest"),
            quests("Awakening", "Find out what the vampires are looking for.", "Main Dawnguard Quest"),
            quests("Bloodline", "Choose your side!", "Main Dawnguard Quest"),
            quests("A New Order (Dawnguard)", "Recruit Isran's old allies.", "Main Dawnguard Quest"),
            quests("Prophet (Dawnguard)", "Find and rescue a Moth Priest.", "Main Dawnguard Quest"),
            quests("The Bloodstone Chalice (Vampires)", "Fill the Bloodstone Chalice from the Bloodspring at Redwater Den.", "Main Dawnguard Quest"),
            quests("Prophet (Vampires)", "Locate a Moth Priest.", "Main Dawnguard Quest"),
            quests("Chasing Echoes", "Explore Castle Volkihar.", "Main Dawnguard Quest"),
            quests("Scroll Scouting", "Obtain all three Elder Scrolls.", "Main Dawnguard Quest"),
            quests("Beyond Death", "Search for Valerica in the Soul Cairn.", "Main Dawnguard Quest"),
            quests("Seeking Disclosure", "Bring the Elder Scrolls to Dexion.", "Main Dawnguard Quest"),
            quests("Unseen Visions", "Perform a ceremony to read the Elder Scroll.", "Main Dawnguard Quest"),
            quests("Touching the Sky", "Find and retrieve Auriel's Bow.", "Main Dawnguard Quest"),
            quests("Kindred Judgment", "Confront Lord Harkon.", "Main Dawnguard Quest"),

            // Dawnguard Side Quests
            quests("Durnehviir", "Learn a dragon shout from Durnehviir.", "Side Dawnguard Quest"),
            quests("Forgotten Vale Books Quest", "Find the Ancient Falmer Tome.", "Side Dawnguard Quest"),
            quests("Impatience of a Saint", "Collect the ten missing pages of Saint Jiub's Opus.", "Side Dawnguard Quest"),
            quests("Lost to the Ages", "Search for the Dwemer's Aetherium Forge.", "Side Dawnguard Quest"),
            quests("Soul Cairn Horse Quest", "Find Arvak's skull.", "Side Dawnguard Quest"),
            quests("Surgery", "Change your appearance.", "Side Dawnguard Quest"),

            // Dawnguard Faction
            quests("Ancient Technology", "Retrieve Dwemer schematics to improve technology.", "Dawnguard Faction"),
            quests("Bolstering the Ranks", "Find Florentius Baenius and recruit him into the Dawnguard.", "Dawnguard Faction"),
            quests("Cleansing Light", "Kill the boss of a vampire lair.", "Dawnguard Faction"),
            quests("Hide and Seek", "Kill a vampire masquerading as a citizen.", "Dawnguard Faction"),
            quests("Hunting the Monster", "Destroy the vampire target.", "Dawnguard Faction"),
            quests("A Jarl's Justice", "Kill a vampire masquerading as a visiting advisor.", "Dawnguard Faction"),
            quests("Lost Relic", "Retrieve a relic of the original Dawnguard.", "Dawnguard Faction"),
            quests("Preemptive Strike", "Destroy the vampire before it turns its allies.", "Dawnguard Faction"),
            quests("Rescue", "Rescue a victim from vampires.", "Dawnguard Faction"),

            // Volkihar Clan
            quests("Amulets of Night Power", "Retrieve the Amulets of Night Power.", "Volkihar Clan"),
            quests("Ancient Power", "Retrieve vampire parts.", "Volkihar Clan"),
            quests("Culling the Beast", "Kill the thin-blooded vampires.", "Volkihar Clan"),
            quests("Deceiving the Herd", "Frame the Dawnguard for murder.", "Volkihar Clan"),
            quests("Destroying the Dawnguard", "Kill the Dawnguard leaders.", "Volkihar Clan"),
            quests("The Gift", "Turn your spouse into a creature of the night.", "Volkihar Clan"),
            quests("The Hunt", "Kill the Dawnguard spy.", "Volkihar Clan"),
            quests("New Allegiances", "Turn the target into a vampire.", "Volkihar Clan"),
            quests("Protecting the Bloodline", "Destroy a vampire before it turns its allies.", "Volkihar Clan"),
            quests("Rings of Blood Magic", "Retrieve the Ring of the Erudite and the Ring of the Beast.", "Volkihar Clan")
          ]},
        // ================== Dragonborn DLC ==================
        {
          key: "dragonborn",
          label: "Dragonborn DLC",
          color: "#2E8B57",
          filters: dragonbornDLC,
          quests: [  
            quests("Dragonborn", "Travel to the island of Solstheim.", "Main Dragonborn Quest"),
            quests("The Temple of Miraak", "Uncover the source of Miraak's power in the Temple of Miraak.", "Main Dragonborn Quest"),
            quests("The Fate of the Skaal", "Find a way to free the citizens of Skaal Village.", "Main Dragonborn Quest"),
            quests("Cleansing the Stones", "Use the Bend Will shout to cleanse the remaining All-Maker Stones.", "Main Dragonborn Quest"),
            quests("The Path of Knowledge", "Discover the locations of the Black Books.", "Main Dragonborn Quest"),
            quests("The Gardener of Men", "Travel to the realm of Hermaeus Mora to learn the rest of Bend Will.", "Main Dragonborn Quest"),
            quests("At the Summit of Apocrypha", "Confront Miraak at the summit of Apocrypha.", "Main Dragonborn Quest"),
            
            // Dragonborn Side Quests
            quests("Black Book", "Retrieve a Black Book.", "Side Dragonborn Quest"),
            quests("Deathbrand", "Find the treasure of Haknir Death-Brand.", "Side Dragonborn Quest"),
            quests("Hrodulf's House", "Uncover the secret of Hrodulf's House.", "Side Dragonborn Quest"),
            quests("Kolbjorn Barrow Misc Objectives", "Search for the relics of Ahzidal in Kolbjorn Barrow.", "Side Dragonborn Quest"),
            quests("Sell Stalhrim Equipment", "Sell stalhrim equipment to Ancarion at Northshore Landing.", "Side Dragonborn Quest"),
            quests("Summoning Karstaag", "Summon and defeat Karstaag.", "Side Dragonborn Quest"),
            quests("The Ebony Warrior", "Locate and defeat the Ebony Warrior.", "Side Dragonborn Quest"),
            quests("The Kagrumez Gauntlet", "Survive the Kagrumez trials to claim a unique prize.", "Side Dragonborn Quest"),
            quests("Unearthed", "Search for the relics of Ahzidal in Kolbjorn Barrow.", "Side Dragonborn Quest"),
            quests("Visit the hunters at Frostmoon Crag", "Talk to the hunters at Frostmoon Crag.", "Side Dragonborn Quest"),
            quests("An Axe to Find", "Retrieve an ancient Nordic pickaxe.", "Side Dragonborn Quest"),
            quests("Clean Sweep", "Clear the Temple Ancestral Tomb of ash spawn.", "Side Dragonborn Quest"),
            quests("Feeding the Addiction", "Convince an innkeeper to let a drunken miner get back to the bar.", "Side Dragonborn Quest"),
            quests("Fetch the Netch", "Obtain five samples of netch jelly.", "Side Dragonborn Quest"),
            quests("First Edition", "Locate an important folio.", "Side Dragonborn Quest"),
            quests("It's All In The Taste", "Distribute Sadri's Sujamma to the citizens of Raven Rock.", "Side Dragonborn Quest"),
            quests("March of the Dead", "Stop the ash spawn attacks.", "Side Dragonborn Quest"),
            quests("Paid in Full", "Recover bonemold formula.", "Side Dragonborn Quest"),
            quests("Pain in the Necklace", "Find East Empire pendants.", "Side Dragonborn Quest"),
            quests("Recipe for Distraction", "Locate a hidden stash of Emberbrand Wine.", "Side Dragonborn Quest"),
            quests("Served Cold", "Save Councilor Morvayn from an assassination plot.", "Side Dragonborn Quest"),
            quests("The Final Descent", "Find out what happened to the great-grandfather of Crescius Caerellius.", "Side Dragonborn Quest"),
            quests("A New Source of Stalhrim", "Find a missing blacksmith.", "Side Dragonborn Quest"),
            quests("Convince Nikulas to stay in Skaal Village", "Counsel a young Skaal on life as an adventurer.", "Side Dragonborn Quest"),
            quests("Filial Bonds", "Find Wulf Wild-Blood's brother.", "Side Dragonborn Quest"),
            quests("Lost Legacy", "Travel to Vahlok's Tomb.", "Side Dragonborn Quest"),
            quests("Skaal Village Dialogue", "Take Bera's necklace to Runil in Falkreath.", "Side Dragonborn Quest"),
            quests("Elmus Favor Quest (berries)", "Retrieve one sample of juniper berries.", "Side Dragonborn Quest"),
            quests("Elmus Favor Quest (mead)", "Retrieve one bottle of Ashfire Mead for Elmus.", "Side Dragonborn Quest"),
            quests("Halbarn Favor Quest", "Find 10 stalhrim samples and 15 ebony ingots.", "Side Dragonborn Quest"),
            quests("Hilund Favor Quest", "Find 50 Riekling spears for Hilund.", "Side Dragonborn Quest"),
            quests("Retaking Thirsk", "Help retake the Thirsk Mead Hall.", "Side Dragonborn Quest"),
            quests("The Chief of Thirsk Hall", "Help a Riekling Chief.", "Side Dragonborn Quest"),
            quests("Thirsk Rumors", "Investigate Thirsk Mead Hall.", "Side Dragonborn Quest"),
            quests("A New Debt", "Help Drovas Relvi with his debt to Mogrul.", "Side Dragonborn Quest"),
            quests("Azra's Staffs", "Retrieve a staff made by Azra Nightwielder.", "Side Dragonborn Quest"),
            quests("Briarheart Necropsy", "Examine a Briarheart.", "Side Dragonborn Quest"),
            quests("Experimental Subject (A)", "Be a test subject in an experiment.", "Side Dragonborn Quest"),
            quests("Experimental Subject (B)", "Be a test subject in an experiment.", "Side Dragonborn Quest"),
            quests("From the Ashes", "Help Talvas Fathryon by killing an ash guardian.", "Side Dragonborn Quest"),
            quests("Healing a House", "Help Elynea Mothren repair the tower of Tel Mithryn.", "Side Dragonborn Quest"),
            quests("Heart Stones", "Find a heart stone for Neloth.", "Side Dragonborn Quest"),
            quests("Hunting and Gathering", "Collect a rare alchemy ingredient.", "Side Dragonborn Quest"),
            quests("Lost Knowledge", "Retrieve the Black Books for Neloth.", "Side Dragonborn Quest"),
            quests("Old Friends", "Find the source of attacks on Tel Mithryn.", "Side Dragonborn Quest"),
            quests("Reluctant Steward", "Find a new steward in Raven Rock.", "Side Dragonborn Quest"),
            quests("Telvanni Research", "Extract a sample from an ash spawn for Neloth's research.", "Side Dragonborn Quest"),
            quests("Wind and Sand", "Retrieve a copy of Wind and Sand.", "Side Dragonborn Quest")
          ]}
      ];
      // ================== Unified shout Configuration ==================
      const collectiblesCategories = [
        // ================== Shouts ================== 
        {
          key: "shout",
          label: "Shouts",
          collectibles: [
            collectibles("Animal Allegiance"),
            collectibles("Aura Whisper"),
            collectibles("Battle Fury"),
            collectibles("Become Ethereal"),
            collectibles("Bend Will"),
            collectibles("Call Dragon"),
            collectibles("Call of Valor"),
            collectibles("Clear Skies"),
            collectibles("Cyclone"),
            collectibles("Disarm"),
            collectibles("Dismaying Shout"),
            collectibles("Dragonrend"),
            collectibles("Dragon Aspect"),
            collectibles("Drain Vitality"),
            collectibles("Elemental Fury"),
            collectibles("Fire Breath"),
            collectibles("Frost Breath"),
            collectibles("Ice Form"),
            collectibles("Kyne's Peace"),
            collectibles("Marked for Death"),
            collectibles("Slow Time"),
            collectibles("Storm Call"),
            collectibles("Soul Tear"),
            collectibles("Summon Durnehviir"),
            collectibles("Throw Voice"),
            collectibles("Unrelenting Force"),
            collectibles("Whirlwind Sprint")
          ]},
          // ================== Stones of Berenziah ==================
        {
          key: "stone",
          label: "Stones of Berenziah",
          collectibles: [
            collectibles("Stony Creek Cave"),
            collectibles("Ansilvund"),
            collectibles("Sunderstone Gorge"),
            collectibles("Dark Brotherhood Sanctuary"),
            collectibles("Pinewatch"),
            collectibles("Dainty Sload"),
            collectibles("Thalmor Embassy"),
            collectibles("The Treasury House"),
            collectibles("Understone Keep"),
            collectibles("Mistveil Keep"),
            collectibles("Dismaying Shout"),
            collectibles("Blue Palace"),
            collectibles("Proudspire Manor"),
            collectibles("Dead Crone Rock"),
            collectibles("Black-Briar Lodge"),
            collectibles("Dragonsreach"),
            collectibles("Jorrvaskr"),
            collectibles("Rannveig's Fast"),
            collectibles("Fellglow Keep"),
            collectibles("House of Clan Shatter-Shield"),
            collectibles("Palace of the Kings"),
            collectibles("College of Winterhold"),
            collectibles("Hob's Fall Cave"),
            collectibles("Yngvild")
          ]},
        // ================== Bugs in a Jar ==================
        {
          key: "bug",
          label: "Bugs in a Jar",
          collectibles: [
            collectibles("Bee in a Jar"),
            collectibles("Butterfly in a Jar"),
            collectibles("Dragonfly in a Jar"),
            collectibles("Moth in a Jar"),
            collectibles("Torchbug in a Jar")
          ]}, 
        // ================== Dragon Claws ==================
        {
          key: "claw",
          label: "Dragon Claws",
          collectibles: [
            collectibles("Coral Dragon Claw"),
            collectibles("Diamond Claw"),
            collectibles("Ebony Claw"),
            collectibles("Emerald Dragon Claw"),
            collectibles("Glass Claw"),
            collectibles("Golden Claw"),
            collectibles("Iron Claw"),
            collectibles("Ivory Dragon Claw"),
            collectibles("Ruby Dragon Claw"),
            collectibles("Sapphire Dragon Claw"),
          ]},
        // ================== Treasure Maps ==================
        {
          key: "map",
          label: "Treasure Maps",
          collectibles: [
            collectibles("Treasure Map I"),
            collectibles("Treasure Map II"),
            collectibles("Treasure Map III"),
            collectibles("Treasure Map IV"),
            collectibles("Treasure Map V"),
            collectibles("Treasure Map VI"),
            collectibles("Treasure Map VII"),
            collectibles("Treasure Map VIII"),
            collectibles("Treasure Map IX"),
            collectibles("Treasure Map X"),
            collectibles("Fort Neugrad Treasure Map"),
            collectibles("Velehk Sain's Treasure Map")
          ]}, 
        // ================== Misc Collectibles ==================
        {
          key: "misc",
          label: "Misc Collectibles",
          collectibles: [
            collectibles("Amethyst Claw, Left Half (DB)"),
            collectibles("Amethyst Claw, Right Half (DB)"),
            collectibles("Ancient Traveler's Skull"),
            collectibles("Aretino Family Heirloom"),
            collectibles("Attunement Sphere"),
            collectibles("Balbus's Fork"),
            collectibles("Canticle Bark (DG)"),
            collectibles("Control Cube (DB)"),
            collectibles("Deathbrand Treasure Map (DB)"),
            collectibles("Draw Knife (DG)"),
            collectibles("Essence Extractor"),
            collectibles("Exquisite Sapphire (DB)"),
            collectibles("Firebrand Wine Case"),
            collectibles("Glenmoril Witch Head"),
            collectibles("Initiate's Ewer (DG)"),
            collectibles("Kagrumez Resonance Gem"),
            collectibles("Map of Dragon Burials"),
            collectibles("Michaela's Flagon"),
            collectibles("Olava's Token"),
            collectibles("Pelagius' Hip Bone"),
            collectibles("Right Eye of the Falmer"),
            collectibles("Runed Lexicon"),
            collectibles("Saerek's Skull Key"),
            collectibles("Sigil Stone"),
            collectibles("Skull (DB)"),
            collectibles("The Dancer's Flute"),
            collectibles("Torsten's Skull Key"),
            collectibles("Ysgramor's Soup Spoon")
          ]},
        // ================== Paragons ==================
        {
          key: "paragon",
          label: "Paragons",
          collectibles: [
            collectibles("Amethyst Paragon"),
            collectibles("Diamond Paragon"),
            collectibles("Emerald Paragon"),
            collectibles("Ruby Paragon"),
            collectibles("Sapphire Paragon")
          ]},

        // ================== Dragon Priest Masks ==================
        {
          key: "dragonPriestMask",
          label: "Dragon Priest Masks",
          collectibles: [
            collectibles("Hevnoraak"),
            collectibles("Krosis"),
            collectibles("Morokei"),
            collectibles("Nahkriin"),
            collectibles("Otar"),
            collectibles("Rahgot"),
            collectibles("Vokun"),
            collectibles("Volsung"),
            collectibles("Konahrik"),
            collectibles("Wooden Mask"),
            collectibles("Mirrak"),
            collectibles("Azhidal"),
            collectibles("Dukaan"),
            collectibles("Zahkriisos")
          ]},
      ];

      // ================== Checklist Helpers ==================
      function createTag(text, className){
        const s=document.createElement("span"); 
        s.className=`tag ${className}`; 
        s.textContent=text; 
        return s; 
      }

      function createChecklistItem(item,type,container){ 
        const id=`tes-skyrim-${type}-${item.title.replace(/\s+/g,"-").toLowerCase()}`;
        item.id = id;
        const li=document.createElement("li");
        const checkbox=document.createElement("input"); 
        checkbox.type="checkbox"; 
        checkbox.id=id; 
        checkbox.checked=localStorage.getItem(id)==="true";
        const label=document.createElement("label"); 
        label.setAttribute("for",id); 
        label.textContent=` ${item.title}`;
        checkbox.addEventListener("change",()=>{
          localStorage.setItem(id,checkbox.checked); 
          updateProgressByType(type);
          updateProgressCollectibles(type);
          updateAllStats();
        });
        li.append(checkbox,label); 

        if(item.tag){ 
          const tags=Array.isArray(item.tag)?item.tag:[item.tag]; 
          tags.forEach(t=>{ if(t) li.append(createTag(t,"tag"+t.replace(/\s+/g,""))); });
        }
        if(item.giver) li.append(createTag(item.giver,"tagGiver"));
        if(item.optional) li.append(createTag(item.optional,"tagOptional"));
        if(item.note) li.append(createTag(item.note,"tagNote"));

        container.appendChild(li);
      }

      // ================== Progress ==================
      function updateProgressByType(key){
        const category = questCategories.find(c => c.key === key);
        if(!category) return;

        const listEl = document.getElementById(`${key}-Quests`);
        const checkboxes = listEl.querySelectorAll("input[type=checkbox]");
        let completed = 0;
        checkboxes.forEach(cb => { if(cb.checked) completed++; });

        const progressEl = document.getElementById(`${key}-Progress`);
        if(progressEl) progressEl.textContent = `Completed ${completed} / ${checkboxes.length}`;
      }
      
      function updateProgressCollectibles(key){
        const category = collectiblesCategories.find(c => c.key === key);
        if(!category) return;

        const listEl = document.getElementById(`${key}-Collectibles`);
        const checkboxes = listEl.querySelectorAll("input[type=checkbox]");
        let completed = 0;
        checkboxes.forEach(cb => { if(cb.checked) completed++; });

        const progressEl = document.getElementById(`${key}-Progress`);
        if(progressEl) progressEl.textContent = `Completed ${completed} / ${checkboxes.length}`;
      }

      // ================== Filter Buttons ==================
      function setActiveButton(containerSelector, text){
        document.querySelectorAll(containerSelector+" .tab-button").forEach(btn=>btn.classList.remove("active"));
        document.querySelectorAll(containerSelector+" .tab-button").forEach(b=>{ if(b.textContent===text) b.classList.add("active"); });
      }

      function renderQuestList(category){
        const listEl = document.getElementById(`${category.key}-Quests`);
        if(!listEl) return;
        listEl.innerHTML = "";

        let filteredQuests = category.quests;
        if(category.activeFilter && category.activeFilter !== "All" && category.filters){
          filteredQuests = filteredQuests.filter(q=>q.tag === category.activeFilter);
        }

        filteredQuests.forEach(q => createChecklistItem(q, category.key, listEl));
        updateProgressByType(category.key);

        // Render filter buttons
        if(category.filters){
          const filterContainer = document.getElementById(`${category.key}-filters`);
          if(filterContainer){
            filterContainer.innerHTML = "";
            // Ensure "All" is first
            const filtersWithAll = ["All", ...category.filters.filter(f => f !== "All")];
            filtersWithAll.forEach(f=>{
              const btn=document.createElement("div");
              btn.className="tab-button"; 
              btn.textContent=f;
              btn.addEventListener("click", ()=>{
                category.activeFilter = f;
                renderQuestList(category);
              });
              filterContainer.appendChild(btn);
            });
            // Initialize activeFilter if undefined
            if(!category.activeFilter) category.activeFilter = "All";
            setActiveButton(`#${category.key}-filters`, category.activeFilter);
          }
        }
      }

      function renderCollectiblesList(category){
        const listEl = document.getElementById(`${category.key}-Collectibles`);
        if(!listEl) return;
        listEl.innerHTML = "";

        let filteredCollectibles = category.collectibles;
        if(category.activeFilter && category.activeFilter !== "All" && category.filters){
          filteredCollectibles = filteredCollectibles.filter(q=>q.tag === category.activeFilter);
        }

        filteredCollectibles.forEach(q => createChecklistItem(q, category.key, listEl));
        updateProgressCollectibles(category.key);

        // Render filter buttons
        if(category.filters){
          const filterContainer = document.getElementById(`${category.key}-filters`);
          if(filterContainer){
            filterContainer.innerHTML = "";
            // Ensure "All" is first
            const filtersWithAll = ["All", ...category.filters.filter(f => f !== "All")];
            filtersWithAll.forEach(f=>{
              const btn=document.createElement("div");
              btn.className="tab-button"; 
              btn.textContent=f;
              btn.addEventListener("click", ()=>{
                category.activeFilter = f;
                renderCollectiblesList(category);
              });
              filterContainer.appendChild(btn);
            });
            // Initialize activeFilter if undefined
            if(!category.activeFilter) category.activeFilter = "All";
            setActiveButton(`#${category.key}-filters`, category.activeFilter);
          }
        }
      }

      // ================== Initialize All Lists ==================
      questCategories.forEach(cat => renderQuestList(cat));
      collectiblesCategories.forEach(cat => renderCollectiblesList(cat));

      // ================== GitHub Links ==================
      window.addEventListener("DOMContentLoaded",()=>{
        document.getElementById("faq-link-container").appendChild(document.getElementById("github-link-template-faq").content.cloneNode(true));
        document.getElementById("footer-link-container").appendChild(document.getElementById("github-link-template-footer").content.cloneNode(true));
      });

      // ================== Export/Import ==================
      function exportChecklist() {
        const data = { prefix: "tes-skyrim" };

        // Export quests
        questCategories.forEach(cat => {
          data[cat.key] = [];
          const listEl = document.getElementById(`${cat.key}-Quests`);
          listEl.querySelectorAll("input[type=checkbox]").forEach(cb => {
            if (cb.checked) data[cat.key].push(cb.id.replace(`tes-skyrim-${cat.key}-`, ""));
          });
        });

        // Export collectibles
        collectiblesCategories.forEach(cat => {
          data[cat.key] = [];
          const listEl = document.getElementById(`${cat.key}-Collectibles`);
          listEl.querySelectorAll("input[type=checkbox]").forEach(cb => {
            if (cb.checked) data[cat.key].push(cb.id.replace(`tes-skyrim-${cat.key}-`, ""));
          });
        });

        const blob = new Blob([JSON.stringify(data, null, 2)], { type: "application/json" });
        const a = document.createElement("a");
        a.href = URL.createObjectURL(blob);
        a.download = "tes-skyrim-checklist.json";
        a.click();
        URL.revokeObjectURL(a.href);
      }

      function importChecklist() {
        const fileInput = document.getElementById("import-file");
        fileInput.click();
        fileInput.onchange = e => {
          const file = e.target.files[0];
          if (!file) return;
          const reader = new FileReader();
          reader.onload = ev => {
            try {
              const imported = JSON.parse(ev.target.result);
              if (imported.prefix !== "tes-skyrim") {
                alert(`This checklist file is for a different game or project ("${imported.prefix}").`);
                return;
              }

              // Import quests
              questCategories.forEach(cat => {
                imported[cat.key]?.forEach(slug => {
                localStorage.setItem(`tes-skyrim-${cat.key}-${slug}`, "true");
              });
            });

            // Import collectibles
            collectiblesCategories.forEach(cat => {
            imported[cat.key]?.forEach(slug => {
            localStorage.setItem(`tes-skyrim-${cat.key}-${slug}`, "true");
            });
            });

            alert("Checklist progress imported! Refresh the page to see updates.");
            } catch (err) {
            alert("Failed to import: Invalid file format.");
            }
            };
            reader.readAsText(file);
            };
            }

// ================== Stats Chart ==================
let combinedChart;

function updateAllStats() {
  const allQuests = questCategories.flatMap(c => c.quests);
  const allCollectibles = collectiblesCategories.flatMap(c => c.collectibles);

  const tagStats = {};

  // --- Quests stats ---
  allQuests.forEach(q => {
    const cat = questCategories.find(c => c.quests.includes(q));
    const key = cat.key === "side" ? "Side Quests" : (q.tag || cat.label || "Main Quests");
    const id = `tes-skyrim-${cat.key}-${q.title.replace(/\s+/g,"-").toLowerCase()}`;
    const completed = localStorage.getItem(id) === "true";

    tagStats[key] = tagStats[key] || { completed: 0, total: 0 };
    tagStats[key].total++;
    if (completed) tagStats[key].completed++;
  });

  // --- Collectibles stats ---
  allCollectibles.forEach(c => {
    const cat = collectiblesCategories.find(cat => cat.collectibles.includes(c));
    if (!cat) return;
    const key = cat.label || "Collectibles";
    const id = `tes-skyrim-${cat.key}-${c.title.replace(/\s+/g,"-").toLowerCase()}`;
    const completed = localStorage.getItem(id) === "true";

    tagStats[key] = tagStats[key] || { completed: 0, total: 0 };
    tagStats[key].total++;
    if (completed) tagStats[key].completed++;
  });

  // --- Chart ---
  const labels = Object.keys(tagStats);
  const data = labels.map(l => tagStats[l].completed);
  const colorMap = {
  "Main Quests": "#FFD700",
  "Side Quests": "#87CEFA",
  "College of Winterhold": "#9370DB",
  "Bards College": "#FF69B4",
  "Blades": "#A9A9A9",
  "Companions": "#C0C0C0",
  "Dark Brotherhood": "#4B0082",
  "Thieves Guild": "#556B2F",
  "Imperial Legion": "#B22222",
  "Stormcloaks": "#1E90FF",
  "Divines Quests": "#00CED1",
  "Daedric Quests": "#8B0000",
  "Main Dawnguard Quest": "#1E90FF",
  "Side Dawnguard Quest": "#1E90FF",
  "Dawnguard Faction": "#4682B4",
  "Volkihar Clan": "#4B0082",
  "Main Dragonborn Quest": "#FF8C00",
  "Side Dragonborn Quest": "#FFA500",
  "Shouts": "#FFA500",
  "Stones of Berenziah": "#8A2BE2",
  "Treasure Maps": "#FFD700",
  "Paragons": "#00FFFF",
  "Dragon Priest Masks": "#8B4513",
  "Dragon Claws": "#9400D3",
  "Bugs in a Jar": "#32CD32",
  "Misc Collectibles": "#FF69B4",
  };

  combinedChart?.destroy();
  combinedChart = new Chart(document.getElementById("combinedChart").getContext("2d"), {
    type: "doughnut",
    data: { labels, datasets: [{ label: "Completed Items", data, backgroundColor: labels.map(l => colorMap[l] || "#aaa"), borderWidth: 0 }] },
    options: { responsive: true, plugins: { legend: { position: "bottom" } } }
  });

  // --- Totals display ---
  const container = document.getElementById("completed-by-type");
  container.querySelectorAll(".category-stats,.total-stats").forEach(el => el.remove());

  // Quests totals
  const filteredQuests = allQuests.filter(q => questCategories.find(c => c.quests.includes(q))?.key !== "shout");
  const totalQuestCompleted = filteredQuests.filter(q => {
    const prefix = questCategories.find(c => c.quests.includes(q))?.key;
    const id = `tes-skyrim-${prefix}-${q.title.replace(/\s+/g, "-").toLowerCase()}`;
    return localStorage.getItem(id) === "true";
  }).length;

  const questsDiv = document.createElement("div");
  questsDiv.classList.add("total-stats");
  questsDiv.style.marginBottom = "10px";
  questsDiv.innerHTML = `<strong>Total quests:</strong> <span style="color:#aaa">${filteredQuests.length}</span> <br><strong>Completed:</strong> <span style="color:#aaa">${((totalQuestCompleted / filteredQuests.length) * 100).toFixed(1)}%</span>`;
  container.appendChild(questsDiv);

  // Collectibles totals
  const totalCollectibleCompleted = allCollectibles.filter(c => {
    const prefix = collectiblesCategories.find(cat => cat.collectibles.includes(c))?.key;
    const id = `tes-skyrim-${prefix}-${c.title.replace(/\s+/g, "-").toLowerCase()}`;
    return localStorage.getItem(id) === "true";
  }).length;

  const collectiblesDiv = document.createElement("div");
  collectiblesDiv.classList.add("total-stats");
  collectiblesDiv.style.marginBottom = "10px";
  collectiblesDiv.innerHTML = `<strong>Total collectibles:</strong> <span style="color:#aaa">${allCollectibles.length}</span> <br><strong>Completed:</strong> <span style="color:#aaa">${((totalCollectibleCompleted / allCollectibles.length) * 100).toFixed(1)}%</span>`;
  container.appendChild(collectiblesDiv);

  // Category stats
  Object.entries(tagStats).forEach(([tag, s]) => {
    const percent = s.total ? (s.completed / s.total * 100).toFixed(1) : 0;
    const div = document.createElement("div");
    div.classList.add("category-stats");
    div.style.marginBottom = "0px";
    div.innerHTML = `<strong>${tag}</strong>: ${s.completed} <span style="color:#aaa">(${percent}%)</span>`;
    container.appendChild(div);
  });
}

    </script>

    <!-- ================== Footer ================== -->
    <footer style="text-align:center; margin-top:40px; font-size:0.9em; color:#aaa;">Check out the project or <span id="footer-link-container"></span>.</footer>

  </body>
</html>
